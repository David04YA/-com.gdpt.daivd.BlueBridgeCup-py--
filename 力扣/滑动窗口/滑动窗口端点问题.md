### 1. 万能公式：从数学定义出发

我们先记住一个永远不会变的数学关系：

对于一个从左端点 `L` 到右端点 `R` 的闭区间 `[L, R]`，它的长度是 `R - L + 1`。

现在，我们把这个公式反过来用，就得到了滑动窗口的“万能公式”：

> **如果一个窗口的右端点是 `R`，长度是 `k`，那么它的左端点 `L` 就等于 `R - k + 1`。**

这个公式是推导一切的基础，请一定记住它。

### 2. 黄金法则：记住两种最常见的模式

在实际写代码时，我们通常会遇到两种循环模式。只要记住这两种模式下“进入”和“离开”窗口的元素是谁，你就不会再混乱了。

------

#### 模式一：`i` 是窗口的“右端点”，`k` 是窗口的“大小” (最常用)

这是最常见、最通用的写法，**强烈推荐你掌握并作为默认思考方式**。

在这种模式下，`for` 循环的变量 `i` 代表**刚刚滑入窗口的那个元素的索引**。

- **窗口大小**：`k`
- **循环变量 `i`**：窗口的右端点
- **当前窗口范围**：根据万能公式，是 `[i - k + 1, i]`

**黄金法则：**

- **进入窗口的元素**：就是 `nums[i]`。
- **离开窗口的元素**：是 `nums[i - k]`。

**为什么是 `i-k`？** 当右端点滑到 `i` 时，前一个窗口的右端点是 `i-1`，范围是 `[i-k, i-1]`。所以，这次滑动中，离开窗口的正是 `nums[i-k]`。



#### 模式二：`i` 是窗口的“中心点”，`k` 是窗口的“半径”

这种写法在你解决 “2090. 半径为k的子数组平均值” (`2090题.py`) 时用到了，它更贴合题目的“半径”描述。

- **半径**：`k`
- **窗口大小**：`2 * k + 1`
- **循环变量 `i`**：窗口的中心点
- **当前窗口范围**：`[i - k, i + k]`

**黄金法则：** 当我们从上一个中心点 `i-1` 滑动到当前中心点 `i` 时：

- **进入窗口的元素**：是新窗口的最右侧 `nums[i + k]`。
- **离开窗口的元素**：是旧窗口的最左侧 `nums[(i-1) - k]`，也就是 `nums[i - k - 1]`。

**为什么是 `i-k-1`？** 因为我们比较的是**以 `i` 为中心的窗口**和**以 `i-1` 为中心的窗口**。

- 新窗口：`[i-k, ..., i+k]`
- 旧窗口：`[i-k-1, ..., i+k-1]` 很明显，`nums[i-k-1]` 被移除了，`nums[i+k]` 被加进来了。

> 对于模式二来说，右端点是i，长度是k+1（k长的半径+1个中心点）,左端点是i-(k+1)+1=i-k,在下一次循环中，i往前进1，那么第一次循环的左端点变远了1，要再减一次1，i-k-1